

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usbnet DataCall &mdash; QuickOpen 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About PPP" href="ppp.html" />
    <link rel="prev" title="UsbNet" href="UsbNet.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            QuickOpen
              <img src="../_static/quectel-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../1-quickstart/index.html">Quick Start</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../2-Platform-Stability/index.html">Platform Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../3-Network-Management/index.html">Network Management Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../4-Peripheral-Interface/index.html">Peripheral Device Support</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usb Support</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="USB.html">USB Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="UsbNet.html">UsbNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="UsbNet.html#rmnet">RMNET</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usbnet DataCall</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-dial-up-for-rmnet">How to dial up for Rmnet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#quectel-cm">quectel-CM</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quectel-cm-for-multiple-pdn">quectel-CM for multiple PDN</a></li>
<li class="toctree-l4"><a class="reference internal" href="#at-cmd-to-set-up-data-call">AT cmd to set up data call</a></li>
<li class="toctree-l4"><a class="reference internal" href="#opensource-qmi-tools">opensource qmi tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ecm">ECM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mbim">MBIM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">quectel-CM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-different-between-rmnet-and-ecm">The different between Rmnet and ECM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ppp.html">About PPP</a></li>
<li class="toctree-l2"><a class="reference internal" href="MoreAboutCM.html">quectel-CM</a></li>
<li class="toctree-l2"><a class="reference internal" href="UsbSerial.html">UsbSerial</a></li>
<li class="toctree-l2"><a class="reference internal" href="adb.html">ADB</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb_mode.html">USB mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="usbmon.html">usbmon</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../6-audio/index.html">Audio Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../7-power/index.html">Power Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../8-linux-apps/index.html">Linux Applications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../android/index.html">Android Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/index.html">Extended Features</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QuickOpen</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Usb Support</a></li>
      <li class="breadcrumb-item active">Usbnet DataCall</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/5-usb/DialUp.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="usbnet-datacall">
<h1>Usbnet DataCall<a class="headerlink" href="#usbnet-datacall" title="Link to this heading"></a></h1>
<section id="how-to-dial-up-for-rmnet">
<h2>How to dial up for Rmnet<a class="headerlink" href="#how-to-dial-up-for-rmnet" title="Link to this heading"></a></h2>
<section id="quectel-cm">
<h3>quectel-CM<a class="headerlink" href="#quectel-cm" title="Link to this heading"></a></h3>
<p>After the module is connected and the GobiNet or QMI_WWAN driver is installed successfully, a USB network adapter and a QMI channel will be created. The USB network adapter of the GobiNet driver is named as ethX (or usbX if the kernel version is 2.6.39 or lower), and the QMI channel is /dev/qcqmiX. The USB network adapter of the QMI_WWAN driver is named as wwanX, and the QMI channel is /dev/cdc-wdmX.</p>
<p>quectel-CM will send QMI message to the module via QMI channel to set up data connection. Please refer to the following table about the usage of quectel-CM:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@cqh6:~# ./quectel-CM/quectel-CM &amp; 
[07-03_06:56:28:172] WCDMA&amp;LTE_QConnectManager_Linux&amp;Android_V1.3.4 
[07-03_06:56:28:172] ./quectel-CM/quectel-CM profile[1] = (null)/(null)/(null)/0, pincode = (null) 
[07-03_06:56:28:174] Find /sys/bus/usb/devices/2-1.2 idVendor=2c7c idProduct=0512 
[07-03_06:56:28:174] Find /sys/bus/usb/devices/2-1.2:1.4/net/wwan0 
[07-03_06:56:28:174] Find usbnet_adapter = wwan0 
[07-03_06:56:28:175] Find /sys/bus/usb/devices/2-1.2:1.4/usbmisc/cdc-wdm0 
[07-03_06:56:28:175] Find qmichannel = /dev/cdc-wdm0 
[07-03_06:56:28:197] cdc_wdm_fd = 7 
[07-03_06:56:28:381] Get clientWDS = 18 
[07-03_06:56:28:445] Get clientDMS = 1 
[07-03_06:56:28:509] Get clientNAS = 2 
[07-03_06:56:28:573] Get clientUIM = 2 
[07-03_06:56:28:637] Get clientWDA = 1 
[07-03_06:56:28:701] requestBaseBandVersion EM12GPAR01A06M4G
[07-03_06:56:28:957] requestGetSIMStatus SIMStatus: SIM_READY 
[07-03_06:56:29:021] requestGetProfile[1] cmnet///0 
[07-03_06:56:29:085] requestRegistrationState2 MCC: 460, MNC: 0, PS: Attached, DataCap: LTE 
[07-03_06:56:29:149] requestQueryDataCall IPv4ConnectionStatus: DISCONNECTED 
[07-03_06:56:29:277] requestRegistrationState2 MCC: 460, MNC: 0, PS: Attached, DataCap: LTE 
[07-03_06:56:29:341] requestSetupDataCall WdsConnectionIPv4Handle: 0x127b42c0 
[07-03_06:56:29:469] requestQueryDataCall IPv4ConnectionStatus: CONNECTED 
[07-03_06:56:29:533] ifconfig wwan0 up 
[07-03_06:56:29:543] busybox udhcpc -f -n -q -t 5 -i wwan0 
udhcpc: started, v1.27.2 
udhcpc: sending discover 
udhcpc: sending select for 10.170.235.201 
udhcpc: lease of 10.170.235.201 obtained, lease time 7200 
[07-03_06:56:29:924] /etc/udhcpc/default.script: Resetting default routes 
[07-03_06:56:29:936] /etc/udhcpc/default.script: Adding DNS 211.138.180.2
[07-03_06:56:29:936] /etc/udhcpc/default.script: Adding DNS 211.138.180.3
</pre></div>
</div>
</section>
<section id="quectel-cm-for-multiple-pdn">
<h3>quectel-CM for multiple PDN<a class="headerlink" href="#quectel-cm-for-multiple-pdn" title="Link to this heading"></a></h3>
<p>Run quectel-qmi-proxy first</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@cqh6:~# ./quectel-qmi-proxy -d /dev/cdc-wdm0 &amp; 
Will use cdc-wdm /dev/cdc-wdm0 
qmi_proxy_init enter 
qmi_proxy_loop enter thread_id 548403548656 
link_prot 2 
ul_data_aggregation_protocol 5 
dl_data_aggregation_protocol 5 
dl_data_aggregation_max_datagrams 10 
dl_data_aggregation_max_size 4096 
ul_data_aggregation_max_datagrams 16 
ul_data_aggregation_max_size 4096 
qmi_proxy_init finished, rx_urb_size is 4096 
local server: quectel-qmi-proxy sockfd = 4 
qmi_start_server: qmi_proxy_server_fd = 4 
</pre></div>
</div>
<p>Run quectel-CM to setup datacall then</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ./quectel-CM -n 2 &amp; 
[06-04_05:13:16:473] WCDMA&amp;LTE_QConnectManager_Linux&amp;Android_V1.3.3 
[06-04_05:13:16:473] ./quectel-CM profile[2] = (null)/(null)/(null)/0, pincode = (null) 
[06-04_05:13:16:475] Find /sys/bus/usb/devices/2-1.2 idVendor=2c7c idProduct=0435 
[06-04_05:13:16:476] Find /sys/bus/usb/devices/2-1.2:1.4/net/wwan0 
[06-04_05:13:16:476] Find usbnet_adapter = wwan0 
[06-04_05:13:16:476] Find /sys/bus/usb/devices/2-1.2:1.4/usbmisc/cdc-wdm0 
[06-04_05:13:16:476] Find qmichannel = /dev/cdc-wdm0 
[06-04_05:13:16:477] qmap_mode = 4, muxid = 0x82, qmap_netcard = wwan0.2 
[06-04_05:13:16:477] connect to quectel-qmi-proxy sockfd = 7 
[06-04_05:13:16:478] cdc_wdm_fd = 7 
[06-04_05:13:16:535] Get clientWDS = 17 
[06-04_05:13:16:567] Get clientDMS = 1 
[06-04_05:13:16:599] Get clientNAS = 3 
[06-04_05:13:16:631] Get clientUIM = 1 
[06-04_05:13:16:663] requestBaseBandVersion AG35CEVAR05A06T4G 
[06-04_05:13:16:791] requestGetSIMStatus SIMStatus: SIM_READY 
[06-04_05:13:16:823] requestGetProfile[2] ///0 
[06-04_05:13:16:855] requestRegistrationState2 MCC: 460, MNC: 0, PS: Attached, DataCap: LTE 
[06-04_05:13:16:887] requestQueryDataCall IPv4ConnectionStatus: DISCONNECTED 
[06-04_05:13:16:950] requestRegistrationState2 MCC: 460, MNC: 0, PS: Attached, DataCap: LTE 
[06-04_05:13:16:983] requestSetupDataCall WdsConnectionIPv4Handle: 0x86e513b0 
[06-04_05:13:17:047] requestQueryDataCall IPv4ConnectionStatus: CONNECTED 
[06-04_05:13:17:079] ifconfig wwan0 up 
[06-04_05:13:17:089] ifconfig wwan0.2 up 
[06-04_05:13:17:100] busybox udhcpc -f -n -q -t 5 -i wwan0.2 
udhcpc: started, v1.27.2 
udhcpc: sending discover 
udhcpc: sending select for 10.247.97.242 
udhcpc: lease of 10.247.97.242 obtained, lease time 7200 
[06-04_05:13:17:449] /etc/udhcpc/default.script: Resetting default routes 
[06-04_05:13:17:465] /etc/udhcpc/default.script: Adding DNS 211.138.180.2 
[06-04_05:13:17:465] /etc/udhcpc/default.script: Adding DNS 211.138.180.3 
</pre></div>
</div>
<p>GobiNet Driver works much the same .</p>
</section>
<section id="at-cmd-to-set-up-data-call">
<h3>AT cmd to set up data call<a class="headerlink" href="#at-cmd-to-set-up-data-call" title="Link to this heading"></a></h3>
<p>AT+QCRMCALL=1,1</p>
<p>Supported on EC20/EC21/EC25/EG25/EG06 …</p>
<p>Not Supported on RG500Q/RM500Q</p>
</section>
<section id="opensource-qmi-tools">
<h3>opensource qmi tools<a class="headerlink" href="#opensource-qmi-tools" title="Link to this heading"></a></h3>
<p>such as mmcli and libqmi</p>
<p>Module support that way .But Quectel provides limited technical support, especially for 5G modules.</p>
</section>
</section>
<section id="ecm">
<h2>ECM<a class="headerlink" href="#ecm" title="Link to this heading"></a></h2>
<p>to be done</p>
</section>
<section id="mbim">
<h2>MBIM<a class="headerlink" href="#mbim" title="Link to this heading"></a></h2>
<p>to be done</p>
<section id="id1">
<h3>quectel-CM<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Check quectel-CM and the port driver version.The latest drivers and tools are required.Problems encountered with older versions of the test are not handled.</p></li>
<li><p>Confirm the status of injection network.The quectel-CM log print contains the SIM card status and network status.</p></li>
<li><p>APN inspection.Check APN carefully for Internet of Things card, private network card and special network card.Let’s find out what APN is going to be issued by the network in the case of null APN.</p></li>
<li><p>DHCP Client tool. It is recommended to use udhcpc or busybox udhcpc. Quectel-CM also supports dhclient. To use dhclient, modify the source file udhcpc.c, by openning the micro “#define USE_DHCPCLIENT”. On Ubuntu or Centos PC platform, it is recommended to use dhclient.</p></li>
<li><p>The Udhcpc default script cannot be opened in Windows.Execute DOS2UNIX default.script and chmod 777 default.script on Ubuntu and copy them to the embedded platform.</p></li>
<li><p>Default.script is usually /usr/share/udhcpc and /etc/udhcpc. It is recommended to make a copy of both.</p></li>
<li><p>If the client USES default.script instead of the default.script in the quectel-cm, try using the default.script in the quectel-cm</p></li>
<li><p>Default.script the Udhcpc has the -s option to specify default.script.</p></li>
<li><p>Encountered ioctl and ptheread_cond_timeout_NP such log, generally is QMI not.The -v option for CM allows you to print QMI messages, providing logs like this.It is necessary to submit usbmon and modem log for further analysis.</p></li>
<li><p>Quectel-cm and ModemManger have conflicts. Try “apt remove – Purge Modemmanger” .Modemmanger is available by default on both Debian and Centos classes.Some modules (EC2X) support ModemManger dialing, 5G unverified.</p></li>
<li><p>Specify the quectel-CM in one specified PID file. Just open this micro “CONFIG_PID_FILE_FORMAT”.</p></li>
</ul>
</section>
</section>
<section id="the-different-between-rmnet-and-ecm">
<h2>The different between Rmnet and ECM<a class="headerlink" href="#the-different-between-rmnet-and-ecm" title="Link to this heading"></a></h2>
<p>to be done</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="UsbNet.html" class="btn btn-neutral float-left" title="UsbNet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ppp.html" class="btn btn-neutral float-right" title="About PPP" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, biaowang.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>